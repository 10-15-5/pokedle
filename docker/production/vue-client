# syntax=docker/dockerfile:1

#to create/update image from root:
#    docker build -t gabr0236/pokedle-client -f docker/vue-client .
#to run container:
#   docker run --publish 8000:8000 gabr0236/pokedle-client:latest
FROM --platform=linux/amd64 node:16.14.2
WORKDIR /app

COPY /client/ /app/client/
COPY package.json ./
COPY index.html ./
COPY vite.config.js ./
COPY tailwind.config.cjs ./
COPY postcss.config.cjs ./

ENV SERVER_URL=https://backend.pokedle.gg
ENV SERVER_API_URL=https://backend.pokedle.gg/api
ENV CLIENT_PORT=8000
ENV DOMAIN=https://pokedle.gg
ENV ENVIRONMENT=production

# need to make sure relative file paths are correct, could use env to change path 
#   but this would create discrepency between prod/dev
COPY /server/data/pokemonData-v5-flavorText.json /app/server/data/

RUN npm i

EXPOSE 8000

CMD ["npm", "run", "client"]
